<mat-card class="cardWithShadow theme-card">

  <mat-card-header>
    <mat-card-title class="m-b-0">Objectives / List of Objective</mat-card-title>
  </mat-card-header>


  <div class=" flex-row gap-15" style="margin-left: 20px; margin-right: 20px;">
    <mat-card class="cardWithShadow theme-card first-theme" *ngFor="let objectif of objectifs">


      <div class="d-flex  mb-auto" style="padding-top: 20px;padding-left: 30px;">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-bulb" width="40"
             height="40" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none"
             stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
          <path d="M3 12h1m8 -9v1m8 8h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7"/>
          <path d="M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0 -1 3a2 2 0 0 1 -4 0a3.5 3.5 0 0 0 -1 -3"/>
          <path d="M9.7 17l4.6 0"/>
        </svg>
        <mat-card-title class="m-b-0" style="margin-top: 8px;
         margin-right: 50px; height: 15px; margin-left: 10px;width:700px;
            font-size:20px;" >
          {{objectif.objectifTitle}}
        </mat-card-title>

        <button mat-flat-button class="btn-lg mr-3"
                style="margin-left:20px;width: 150px;border-radius: 10px;
                background-color:#01A2F9 ; color:#FFFFFF" placement="start"
                ngbPopover="{{objectif.description}}"
                popoverTitle="{{objectif.objectifTitle}}"
                popoverClass="large-popover"
        >
          Description
        </button>

        <button mat-flat-button class="btn-lg mr-3"
                style="margin-left:20px;width: 150px;border-radius: 10px;margin-right:20px;
                background-color:#01A2F9 ; color:#FFFFFF" placement="top"
                ngbPopover="{{objectif.assigned}}"
                popoverTitle="Assigned To"
                popoverClass="large-popover"
        >
          Assigned To
        </button>


        <button mat-flat-button class="btn-lg mr-3"
                style="margin-right:10px;width: 150px;border-radius: 10px;
                background-color:#e6bc15 ; color:#0a0a0a" *ngIf="hasautority()"
                (click)="gotoupdateobjectif(objectif.objectifId)">
          Update
        </button>
      </div>




      <mat-card-content class=" d-flex gap-20 " >
        <div class="d-flex align-items-start flex-column">

          <div>
            <div class="d-flex flex-row " style="margin-top:20px;">
              <button mat-flat-button style="margin-right: 20px; width: 100px;
              background-color:#FBE7E8 ; color:#A30D11"
                      class="btn-lg btn-danger" (click)="deleteObjectif(objectif)" *ngIf="hasautority()" >Canceled
              </button>
              <button mat-flat-button color="primary" style="margin-right: 20px; width: 100px;
               background-color:#EBF9F1 ; color:#1F9254" class="btn-lg btn-danger">Completed
              </button>
              </div>
          </div>
        </div>
        <mat-card-content class="d-flex flex-column p-0" style="min-width:130px;" >
          <div>
            Start Date:
          </div>
          <div class="d-flex" style="margin-top:10px;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    style="margin-bottom:3px;"           class="icon icon-tabler icons-tabler-outline icon-tabler-calendar-due"><path stroke="none"
                                                                                                       d="M0 0h24v24H0z"
                                                                                                       fill="none"/><path
            d="M4 5m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"/><path d="M16 3v4"/><path
            d="M8 3v4"/><path d="M4 11h16"/><path
            d="M12 16m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"/></svg>
            &nbsp;
            <span>{{ objectif.objectifStart | date }}</span></div>
        </mat-card-content>
        <mat-card-content class="d-flex flex-column p-0"  style="min-width:130px;" >
          <div>
            End Date:
          </div>
          <div class="d-flex" style="margin-top:10px;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                            style="margin-bottom:3px;"class="icon icon-tabler icons-tabler-outline icon-tabler-calendar-due"><path stroke="none"
                                                                                                       d="M0 0h24v24H0z"
                                                                                                       fill="none"/><path
            d="M4 5m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"/><path d="M16 3v4"/><path
            d="M8 3v4"/><path d="M4 11h16"/><path
            d="M12 16m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"/></svg>
            &nbsp;
            <span>{{ objectif.dateLimite | date }}</span></div>
        </mat-card-content>
        <mat-card-content class="m-b-0 "
                          style="margin-bottom: 20px;margin-right: 30px;" style="padding: 0px;min-width:220px;" >
          <div class="flex-container">


            <div class="time"
                 [ngClass]="{'time-is-up': objectif.days === '00' && objectif.hours === '00' && objectif.minutes === '00' && objectif.seconds === '00'}">

              Temps restant :{{objectif.days}} :{{ objectif.hours }}:{{ objectif.minutes }}:{{ objectif.seconds }}

            </div>
          </div>


        </mat-card-content>
        <mat-card-content class="row d-flex p-0 " style="max-width:100px;" >
          <ng-container *ngIf="buttonvisible">
            <button mat-flat-button (click)="toggleInput(objectif)">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-message-plus" width="44"
                   height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none"
                   stroke-linecap="round" stroke-linejoin="round" style="margin-top: 25px;">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M8 9h8"/>
                <path d="M8 13h6"/>
                <path d="M12.01 18.594l-4.01 2.406v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v5.5"/>
                <path d="M16 19h6"/>
                <path d="M19 16v6"/>
              </svg>
            </button>


          </ng-container>
          <ng-container *ngIf="!buttonvisible && objectif.objectifId == selectedObjectif.objectifId"
                        class="row justify-content-end">
            <button mat-flat-button (click)="toggleInput(objectif)">
              <svg xmlns="http://www.w3.org/2000/svg"
                   class="icon icon-tabler icon-tabler-arrow-back-up" width="30" height="20" viewBox="0 0 24 24"
                   stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M9 14l-4 -4l4 -4"/>
                <path d="M5 10h11a4 4 0 1 1 0 8h-1"/>
              </svg>
            </button>
          </ng-container>
        </mat-card-content>

        <mat-card-content class="row d-flex" style="padding: 0px;">

          <div *ngIf="inputVisible && objectif.objectifId == selectedObjectif.objectifId" fxLayout="column"
               fxLayoutAlign="center center"
               class=" row justify-content-center">
            <textarea matInput placeholder="Enter comment" [(ngModel)]="description" rows="5"></textarea>
            <button mat-raised-button color="accent" (click)="sendDescription()"
                    style="margin-top:15px;"


            >Send
            </button>
          </div>


        </mat-card-content>

      </mat-card-content>


    </mat-card>
  </div>


  <div class="d-flex justify-content-center" style="margin-bottom:15px;">
    <button mat-flat-button
            color="primary"


            style=" width: 150px;"
            class="btn-lg btn-danger" (click)="onPageChange(currentPage - 1)" [disabled]="currentPage === 0">Previous
    </button>
    <span style="margin-right: 20px;margin-left: 20px;margin-top: 5px">Page {{currentPage + 1}}</span>
    <button (click)="onPageChange(currentPage + 1)"
            [disabled]="currentPage === (totalItems / pageSize) - 1"

            mat-flat-button
            color="primary"


            style="margin-right: 20px; width: 150px;"
            class="btn-lg btn-danger"

    >Next
    </button>
  </div>


</mat-card>

